@{
    Page.Title = "Sorting Result";
    Layout = "~/Shared/_SiteLayout.cshtml";

    string userHouse = "";
    string userHouseImg = "";

    if (IsPost)
    {
        Validation.RequireField("group1", "You have to answer this question");
        Validation.RequireField("group2", "You have to answer this question");
        Validation.RequireField("group3", "You have to answer this question");
        Validation.RequireField("group4", "You have to answer this question");
        Validation.RequireField("group5", "You have to answer this question");
    }

    if (IsPost && Validation.IsValid())
    {
        int griffPoints = 0;
        int slythPoints = 0;
        int huffPoints = 0;
        int ravenPoints = 0;

        for (int i = 0; i < 5; i++)
        {
            string s = "group" + (i + 1);
            switch (Request.Form[s])
            {
                case "a":
                    griffPoints++;
                    break;
                case "b":
                    slythPoints++;
                    break;
                case "c":
                    huffPoints++;
                    break;
                case "d":
                    ravenPoints++;
                    break;
            }
        }

        int highestValue = Math.Max(griffPoints, Math.Max(slythPoints, Math.Max(huffPoints, ravenPoints)));

        if (griffPoints == highestValue)
        {
            userHouse = "Gryffindor";
            userHouseImg = "Gryffindor.png";
        }
        if (slythPoints == highestValue)
        {
            if (string.IsNullOrEmpty(userHouse))
            {
                userHouse = "Slytherin";
                userHouseImg = "Slytherin.png";
            }
            else
            {

            }
        }
        if (huffPoints == highestValue)
        {
            if (string.IsNullOrEmpty(userHouse))
            {
                userHouse = "Hufflepuff";
                userHouseImg = "Hufflepuff.png";
            }
            else
            {

            }
        }
        if (ravenPoints == highestValue)
        {
            if (string.IsNullOrEmpty(userHouse))
            {
                userHouse = "Ravenclaw";
                userHouseImg = "Ravenclaw.png";
            }
            else
            {

            }
        }
    }
}

@if (IsPost && Validation.IsValid())
{
    <div class="row">
        <div class="center">
            <h3>Congratulations!</h3>
            <hr class="col s4 offset-s4" />
        </div>
    </div>

    <div class="row">
        <div class="center">
            <h2 class="flow-text">"You are a true @userHouse!"</h2>
        </div>
    </div>

    <div class="row">
        <div class="col s8 offset-s2 m6 offset-m3 l4 offset-l4 card">
            <div class="card-image waves-effect waves-block waves-light">
                <img class="activator" src="~/Images/@userHouseImg">
            </div>
            <div class="center">
                <span class="card-title activator grey-text text-darken-4">@userHouse</span>
            </div>
            <div class="card-reveal">
                <span class="card-title grey-text text-darken-4">@userHouse<i class="material-icons right">close</i></span>
                <p>Here is some more information about this product that is only revealed once clicked on.</p>
            </div>
        </div>
    </div>
    
    <div class="center">
        <a class="btn waves-effect">Continue</a>
        <br />
        <br />
    </div>
}